(function(){"use strict";var e={1241:function(e,t,n){var r=n(6369),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],l=n(3822),s={name:"RootView",data(){return{}},computed:{...(0,l.Se)(["isLogin"])},methods:{...(0,l.nv)(["getAuthorityInfo"])},created(){this.getAuthorityInfo()},mounted(){}},i=s,c=n(1001),u=(0,c.Z)(i,a,o,!1,null,null,null),d=u.exports,m=n(2631);const p="UPDATE_AUTHORITY_INFO",f={adminname:"",token:"",role:null,checkedkeys:[]};var h={[p]:function(e,t){for(let n in t)Object.keys(e).includes(n)&&(e[n]=t[n])}},g=(n(7658),n(4161)),b=n(8499),v=n.n(b);const y=g.Z.create({baseURL:"http://43.138.81.225:5566/admin"});y.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",y.interceptors.request.use((function(e){let t=localStorage.getItem("info");if(t){let n=JSON.parse(t),r=n.token;console.log(r),r&&(e.headers["token"]=r)}return e}),(function(e){return Promise.reject(e)})),y.interceptors.response.use((function(e){console.log("响应拦截",e);let t=e.data,{code:n,message:r}=t,a=200==n,o=10119==n;if(a)return e.data;if(o){b.Message.error("token过期,请重新登录"),dt.push({name:"login",query:{ReturnUrl:dt.currentRoute.fullPath}});let e=new Error(r);return Promise.reject(e)}var l=new Error(r);return Promise.reject(l)}),(function(e){return Promise.reject(e)}));var w=y;const _=e=>w.post("/admin/login",e),k=e=>w.get("/admin/list",{params:e}),x=e=>w.post("/admin/add",e),C=e=>w.post("/admin/delete",e);var S={getAuthorityInfo:function({commit:e}){let t=localStorage.getItem("info");if(t){let n=JSON.parse(t);return console.log(n.adminname),e(p,n),n}return""},loginAndUpdateAuthorityInfo({commit:e},t){return _(t).then((t=>{let n=t.data;return console.log(n),e(p,n),localStorage.setItem("info",JSON.stringify(n)),n}))},exitAndUpdateAuthorityInfo({commit:e}){localStorage.removeItem("info"),e(p,f)}},P={isLogin(e){return console.log(e.adminname,e.token,e.role),!!(e.adminname&&e.token&&e.role)}};r["default"].use(l.ZP);var $=new l.ZP.Store({state:{...JSON.parse(JSON.stringify(f))},getters:P,mutations:h,actions:S,modules:{}}),A=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"home"},[t("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[t("Header")],1),t("el-container",{staticClass:"container"},[t("el-aside",{staticClass:"aside",attrs:{width:"200px"}},[t("Aside")],1),t("el-main",[t("router-view")],1)],1)],1)},L=[],H=function(){var e=this,t=e._self._c;return t("div",[t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.itemChange}},[t("span",{staticClass:"el-dropdown-link"},[t("span",[e._v(e._s(e.$store.state.adminname))]),t("i",{staticClass:"el-icon-platform-eleme el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:1}},[e._v("查看")]),t("el-dropdown-item",{attrs:{command:2}},[e._v("新增")]),t("el-dropdown-item",{attrs:{command:3}},[e._v("删除")]),t("el-dropdown-item",{attrs:{command:4}},[e._v("退出")])],1)],1)],1)},I=[],O={name:"HeaderLayout",methods:{...(0,l.nv)(["exitAndUpdateAuthorityInfo"]),itemChange(e){4===e&&(this.exitAndUpdateAuthorityInfo(),this.$router.push("/login"))}}},j=O,F=(0,c.Z)(j,H,I,!1,null,null,null),N=F.exports,E=function(){var e=this,t=e._self._c;return t("el-menu",{attrs:{router:!0,"unique-opened":"","default-active":e.$route.path}},[e._l(e.menus,(function(n,r){return[n.children?t("el-submenu",{key:r,attrs:{index:n.path}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),e._v(e._s(n.label))]),e._l(n.children,(function(n,r){return t("el-menu-item",{key:r,attrs:{index:n.path}},[e._v(e._s(n.label))])}))],2):t("el-menu-item",{key:r,attrs:{index:n.path}},[t("i",{staticClass:"el-icon-platform-eleme"}),e._v(e._s(n.label)+" ")])]}))],2)},Z=[],U={name:"AsideLayout",data(){return{menus:st}}},B=U,T=(0,c.Z)(B,E,Z,!1,null,null,null),q=T.exports,D={name:"HomeView",data(){const e={date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"};return{tableData:Array(20).fill(e)}},components:{Header:N,Aside:q},computed:{...(0,l.Se)(["isLogin"])},mounted(){console.log("主页面中isLogin",this.isLogin),this.isLogin||this.$router.push({name:"login",query:{ReturnUrl:this.$route.fullPath}})}},K=D,R=(0,c.Z)(K,A,L,!1,null,"a3d5c0d4",null),z=R.exports,V=function(){var e=this,t=e._self._c;return t("h1",[e._v("404")])},J=[],M={name:"NotFound"},W=M,Y=(0,c.Z)(W,V,J,!1,null,null,null),G=Y.exports,Q=function(){var e=this,t=e._self._c;return t("div",[e._v(" 这是主页 ")])},X=[],ee={name:"HomeDefault"},te=ee,ne=(0,c.Z)(te,Q,X,!1,null,null,null),re=ne.exports,ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bannerList"},[t("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.list}},[t("el-table-column",{attrs:{prop:"bannerid",label:"编号",width:"200"}}),t("el-table-column",{attrs:{label:"图片",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticClass:"img",attrs:{src:e.row.img,alt:""}})]}}])}),t("el-table-column",{attrs:{prop:"alt",label:"图片提示",width:"200px"}}),t("el-table-column",{attrs:{prop:"link",label:"图片链接",width:"200px"}}),t("el-table-column",{attrs:{prop:"flag",label:"公开"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.changeStateHandler(n.row.bannerid,t)}},model:{value:n.row.flag,callback:function(t){e.$set(n.row,"flag",t)},expression:"slotScope.row.flag"}})]}}])}),t("el-table-column",{attrs:{label:"操作"},on:{click:function(t){return e.delAll()}},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{on:{click:function(t){return e.deleteBannerById(n.row.bannerid)}}},[e._v("删除")])]}}])})],1)],1)},oe=[];const le=e=>w.get("/banner/list",{params:e}),se=e=>w.post("/banner/add",e),ie=e=>w.get("/banner/removeAll",{params:e}),ce=e=>w.get("/banner/delete",{params:e}),ue=e=>w.post("/banner/updateFlag",{params:e},{});console.log(ce,ie,ue);var de={name:"BannerListView",data(){return{list:null}},methods:{async getBannerList(){try{var e=await le();console.log("请求成功",e),this.list=e.data}catch(t){console.log("失败",t)}},async changeStateHandler(e,t){console.log(e,t);try{var n=await ue({bannerid:e,flag:t});console.log("请求成功",n),this.$message.success("状态更新成功")}catch(r){console.log("失败",r),this.$message.err(r.message)}},async deleteBannerById(e){console.log(e);try{let n=await ce({bannerid:e});console.log(n),this.$message.success("状态更新成功");var t=this.list.findIndex((t=>t.bannerid==e));console.log(t),this.list.splice(t,1)}catch(n){console.log("失败",n)}},async delAll(){console.log(111111);try{await ie()}catch(e){console.log(e)}}},mounted(){this.getBannerList()}},me=de,pe=(0,c.Z)(me,ae,oe,!1,null,"bc2306cc",null),fe=pe.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bannerShow"},[e.showImgCount?[t("div",{ref:"mySwiper",staticClass:"swiper demo"},[t("div",{staticClass:"swiper-wrapper"},[e._l(e.list,(function(n,r){return[n.flag?t("div",{key:r,staticClass:"swiper-slide"},[t("img",{attrs:{src:n.img,alt:""}})]):e._e()]}))],2),t("div",{staticClass:"swiper-pagination"}),t("div",{staticClass:"swiper-button-prev"}),t("div",{staticClass:"swiper-button-next"})])]:e._e(),0==e.loading&&0==e.showImgCount?[t("el-empty",{attrs:{description:"暂无图片"}})]:e._e()],2)},ge=[],be=n(9391),ve={name:"bannerShowView",data(){return{list:[],mySwiper:null,loading:!0}},methods:{async getBannerList(){this.loading=!0;try{var e=await le();console.log("请求成功",e),this.list=e.data,this.loading=!1}catch(t){console.log("失败",t)}},initSwiper(){this.mySwiper=new be.ZP(this.$refs.mySwiper,{loop:!0,autoplay:!0,observer:!0,observeParents:!0,modules:[be.tl,be.W_,be.pt],pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}},computed:{showImgCount(){return this.list.filter((e=>e.flag)).length}},watch:{list(){this.$nextTick((()=>{this.initSwiper()}))}},mounted(){this.getBannerList(),this.initSwiper()}},ye=ve,we=(0,c.Z)(ye,he,ge,!1,null,"08d2026b",null),_e=we.exports,ke=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bannerAdd"},[t("el-radio-group",{on:{input:function(t){return e.resetHandler("bannerUpload")}},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[t("el-radio-button",{attrs:{label:"在线上传"}}),t("el-radio-button",{attrs:{label:"本地上传"}})],1),t("el-form",{ref:"bannerUpload",staticClass:"uploadBanner",attrs:{"label-position":"right","label-width":"80px",model:e.form}},["在线上传"==e.type?[t("el-form-item",{key:"line",attrs:{label:"地址",prop:"img",rules:[{required:!0,message:"请传入图片地址",triggle:"blur"}]}},[t("el-input",{model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}})],1)]:[t("el-form-item",{key:"local",attrs:{label:"地址",prop:"img"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","auto-upload":!1,drag:"","show-file-list":"","on-change":e.selectImgChange}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1)],t("el-form-item",{attrs:{label:"提示信息",prop:"alt",rules:[{required:!0,message:"请传入提示信息",triggle:"blur"}]}},[t("el-input",{model:{value:e.form.alt,callback:function(t){e.$set(e.form,"alt",t)},expression:"form.alt"}})],1),t("el-form-item",{attrs:{label:"图片链接",prop:"link",rules:[{required:!0,message:"请传入链接地址",triggle:"blur"}]}},[t("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitHandler("bannerUpload")}}},[e._v("提交")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){return e.resetHandler("bannerUpload")}}},[e._v("重置")])],1)],2)],1)},xe=[];function Ce(e){return new Promise((function(t,n){const r=new FileReader;r.readAsDataURL(e),r.onload=function(){t(this.result)},r.onerror=function(){n("转化失败")}}))}console.log(Ce);var Se={name:"BannerAddView",data(){return{form:{img:"",alt:"",link:""},type:"在线上传"}},methods:{async selectImgChange(e){try{var t=await Ce(e.raw);console.log("base64",t),this.form.img=t}catch(n){this.$message.error(n.message)}},submitHandler(e){this.$refs[e].validate((async t=>{if(t)try{var n=await se(this.form);console.log("res",n),this.$message({type:"success",message:"上传成功"}),this.$refs[e].resetFields()}catch(r){this.$message.error(r.message)}}))},resetHandler(e){console.log("1111",this.$refs[e]),this.$refs[e].resetFields()}}},Pe=Se,$e=(0,c.Z)(Pe,ke,xe,!1,null,"ec0c5b7e",null),Ae=$e.exports,Le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"proList"},[t("el-form",{ref:"searchForm",attrs:{inline:"","label-width":"80px",model:e.searchParams},on:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"search"}},[t("el-input",{attrs:{placeholder:"请输入...."},model:{value:e.searchParams.search,callback:function(t){e.$set(e.searchParams,"search",t)},expression:"searchParams.search"}})],1),t("el-form-item",{attrs:{label:"分类选择",prop:"category"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择分类"},model:{value:e.searchParams.category,callback:function(t){e.$set(e.searchParams,"category",t)},expression:"searchParams.category"}},e._l(e.options,(function(e,n){return t("el-option",{key:n,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.searchHandler}},[e._v("搜索")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetHandler("searchForm")}}},[e._v("重置")])],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[t("el-table-column",{attrs:{prop:"proname",label:"商品名称",width:"180",fixed:""},scopedSlots:e._u([{key:"default",fn:function({row:{proname:n}}){return[t("div",{staticClass:"name"},[t("a",{attrs:{title:n}},[e._v(e._s(n))])])]}}])}),t("el-table-column",{attrs:{prop:"img",label:"商品图片",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.img1,"preview-src-list":[e.row.img1,e.row.img2,e.row.img3,e.row.img4]}})]}}])}),t("el-table-column",{attrs:{prop:"originprice",label:"商品价格",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:{originprice:t,discount:n}}){return[e._v(" "+e._s(10==n?t:(t*n/10).toFixed(2))+" ")]}}])}),t("el-table-column",{attrs:{prop:"originprice",label:"商品折扣",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:{discount:t}}){return[e._v(" "+e._s(10==t?"暂无折扣":t)+" ")]}}])}),t("el-table-column",{attrs:{prop:"sales",label:"销量",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:{sales:t}}){return[e._v(" "+e._s(t)+" ")]}}])}),t("el-table-column",{attrs:{prop:"stock",label:"库存",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:{issale:t,stock:n}}){return[e._v(" "+e._s(t?n:0)+" ")]}}])}),t("el-table-column",{attrs:{prop:"isseckill",label:"开启秒杀",width:"180"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.updateIsseckillHandler(n.row.proid,t)}},model:{value:n.row.isseckill,callback:function(t){e.$set(n.row,"isseckill",t)},expression:"slotScope.row.isseckill"}})]}}])}),t("el-table-column",{attrs:{prop:"isrecommend",label:"开启推荐",width:"180"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.updateIsrecommendHandler(n.row.proid,t)}},model:{value:n.row.isrecommend,callback:function(t){e.$set(n.row,"isrecommend",t)},expression:"slotScope.row.isrecommend"}})]}}])}),t("el-table-column",{attrs:{prop:"isrecommend",label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function({row:{proid:n}}){return[t("el-button",{on:{click:function(t){return e.lookUpHandler(n)}}},[e._v("查看")]),t("el-button",[e._v("删除")])]}}])})],1),t("div",{staticClass:"pageBox"},[t("el-pagination",{staticClass:"page",attrs:{total:e.total,"current-page":e.pageParams.count,"page-size":e.pageParams.limitNum,"page-sizes":[5,10,20,30,50],background:"",layout:"prev, pager, next,total,sizes,jumper"},on:{"update:currentPage":function(t){return e.$set(e.pageParams,"count",t)},"update:current-page":function(t){return e.$set(e.pageParams,"count",t)},"update:pageSize":function(t){return e.$set(e.pageParams,"limitNum",t)},"update:page-size":function(t){return e.$set(e.pageParams,"limitNum",t)}}})],1),t("el-drawer",{attrs:{direction:"rtl",title:"我是标题",visible:e.isShowDrawer,"with-header":!1},on:{"update:visible":function(t){e.isShowDrawer=t}}},[t("el-container",[t("el-main",[t("el-descriptions",{attrs:{title:"商品详情",column:2,border:""}},[t("el-descriptions-item",{attrs:{label:"商品名称",span:"2"}},[e._v(e._s(e.info.proname))]),t("el-descriptions-item",{attrs:{label:"分类"}},[e._v(e._s(e.info.category))]),t("el-descriptions-item",{attrs:{label:"品牌"}},[e._v(e._s(e.info.brand))]),t("el-descriptions-item",{attrs:{label:"图片",span:"2"}},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.info.img1,"preview-src-list":[e.info.img1,e.info.img2,e.info.img3,e.info.img4]}})],1),t("el-descriptions-item",{attrs:{label:"价格"}},[e._v(" "+e._s(10==e.info.discount?e.info.originprice:1*(e.info.originprice*e.info.discount/10).toFixed(2))+" ")]),10!=e.info.discount?t("el-descriptions-item",{attrs:{label:"折扣"}},[e._v(" "+e._s(e.info.discount)+" ")]):e._e(),t("el-descriptions-item",{attrs:{label:"销量"}},[e._v(" "+e._s(e.info.sales)+" ")]),t("el-descriptions-item",{attrs:{label:"库存"}},[e._v(" "+e._s(e.info.issale?e.info.stock:0)+" ")]),e.info.isseckill?t("el-descriptions-item",{attrs:{label:"秒杀活动"}},[e._v(" 秒杀活动以开启 ")]):e._e(),e.info.isrecommend?t("el-descriptions-item",{attrs:{label:"推荐"}},[e._v(" 官方推荐 ")]):e._e()],1)],1)],1)],1)],1)},He=[];const Ie=e=>w.get("/pro/list",{params:e}),Oe=e=>w.post("/pro/updateFlag",Object.assign({type:"isseckill"},e)),je=e=>w.post("/pro/updateFlag",{type:"isrecommend",...e}),Fe=e=>w.get("/pro/detail",{params:e}),Ne=e=>w.post("/pro/searchPro",e),Ee=e=>w.get("/pro/getCategory",{params:e});var Ze={name:"ProListView",data(){return{pageParams:{count:1,limitNum:5},searchParams:{search:"",category:""},list:[],total:0,options:[],isShowDrawer:!1,info:{}}},methods:{async getProList(){try{var e=await Ie(this.pageParams);console.log("res",e),this.list=e.data,this.total=e.total}catch(t){throw this.$message.error(t.message),t}},async updateIsseckillHandler(e,t){console.log(e,t,{proid:e,flag:!!t});try{var n=await Oe({proid:e,flag:!!t});console.log("res",n)}catch(r){throw this.$message.error(r.message),r}},async updateIsrecommendHandler(e,t){console.log(e,t,typeof t);try{var n=await je({proid:e,flag:!!t});console.log("res",n)}catch(r){throw this.$message.error(r.message),r}},async getCategory(){try{var e=await Ee();console.log("商品分类",e),this.options=e.data}catch(t){throw this.$message.error(t.message),t}},async searchPro(){try{var e=await Ne(this.searchParams);console.log("查询商品",e),this.list=e.data}catch(t){throw this.$message.error(t.message),t}},searchHandler(){this.searchPro()},resetHandler(e){this.searchParams.category||this.searchPro(),console.log(11111,this.$refs[e]),this.$refs[e].resetFields()},async lookUpHandler(e){try{var t=await Fe({proid:e});console.log("查询商品详情",t),this.info=t.data[0],this.isShowDrawer=!0}catch(n){throw this.$message.error(n.message),n}}},watch:{pageParams:{handler:function(){console.log("count或limitNum发生了改变"),this.getProList()},deep:!0},"searchParams.category"(e,t){console.log("category改变了",e,t),this.searchPro()}},mounted(){this.getProList(),this.getCategory()}},Ue=Ze,Be=(0,c.Z)(Ue,Le,He,!1,null,"4823022e",null),Te=Be.exports,qe=function(){var e=this;e._self._c;return e._m(0)},De=[function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("我是saaaa啊")])])}],Ke={name:"ProductListView"},Re=Ke,ze=(0,c.Z)(Re,qe,De,!1,null,null,null),Ve=ze.exports,Je=function(){var e=this,t=e._self._c;return t("div",{staticClass:"adminAdd"},[t("el-button",{attrs:{type:"primary"}},[e._v("管理员新增")]),t("el-form",{ref:"adminForm",staticClass:"adminAddForm",attrs:{model:e.form,"label-width":"120px"},on:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:"管理员名称",prop:"adminname",rules:[{required:!0,message:"请输入管理员名称",trigger:"blur"}]}},[t("el-input",{model:{value:e.form.adminname,callback:function(t){e.$set(e.form,"adminname",t)},expression:"form.adminname"}})],1),t("el-form-item",{attrs:{label:"管理员密码",prop:"password",rules:[{type:"string",required:!0,message:"请输入管理员密码",trigger:"blur"}]}},[t("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"管理员等级",prop:"role",rules:[{type:"number",required:!0,message:"请选择管理员等级",trigger:"change"}]}},[t("el-select",{attrs:{clearable:"",placeholder:""},on:{change:e.roleChangehandler},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",e._n(t))},expression:"form.role"}},[t("el-option",{attrs:{label:"超级管理员",value:1}}),t("el-option",{attrs:{label:"普通管理员",value:2}}),t("el-option",{attrs:{label:"普通用户",value:3}})],1)],1),t("el-form-item",{attrs:{label:"管理员权限",prop:"checkedKeys"}},[t("el-tree",{ref:"tree",attrs:{data:e.menus,"show-checkbox":"","node-key":"path","default-checked-keys":[],props:e.defaultProps}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitHandler}},[e._v("提交")]),t("el-button",{attrs:{type:"primary"},on:{click:e.resetHandler}},[e._v("重置")])],1)],1)],1)},Me=[],We={name:"AdminAddView",data(){return{form:{adminname:"",password:"",role:"",checkedKeys:[]},menus:st,defaultProps:{label:"label",children:"children"}}},methods:{async submitHandler(){this.form.checkedKeys=this.$refs.tree.getCheckedKeys(),this.$refs.adminForm.validate((async e=>{if(console.log(11111,e),e)try{var t=await x(this.form);console.log("新增成功",t),this.$message.success("新增成功"),this.$refs.adminForm.resetFields(),this.$refs.tree.setCheckedKeys([])}catch(n){this.$message.error(n.message)}}))},resetHandler(){this.$refs.adminForm.resetFields(),this.$refs.tree.setCheckedKeys([])},roleChangehandler(e){console.log(1111,e),this.$refs.tree.setCheckedKeys([]),""==e?this.$refs.tree.setCheckedKeys([]):1==e&&this.$refs.tree.setCheckedKeys(["/home","/banner","/pro","/admin"])}},mounted(){console.log("menus",this.menus)}},Ye=We,Ge=(0,c.Z)(Ye,Je,Me,!1,null,"37626558",null),Qe=Ge.exports,Xe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"adminList"},[t("el-table",{attrs:{data:e.list,border:""}},[t("el-table-column",{attrs:{prop:"adminid",label:"管理员id"}}),t("el-table-column",{attrs:{prop:"adminname",label:"管理员名称"}}),t("el-table-column",{attrs:{prop:"password",label:"管理员密码"}}),t("el-table-column",{attrs:{prop:"role",label:"权限等级"}}),t("el-table-column",{attrs:{prop:"checkedKeys",label:"权限列表"},scopedSlots:e._u([{key:"default",fn:function({row:{checkedKeys:n,role:r}}){return[1==r?t("div",[e._v("所有页面")]):e._l(n,(function(n,r){return t("div",{key:r},[e._v(" "+e._s(n)+" ")])}))]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:{adminid:n}}){return[t("el-button",{attrs:{size:"small"}},[e._v("查看")]),t("el-button",{attrs:{size:"small"}},[e._v("编辑")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.deleteAdminHandler(n)}}},[e._v("删除")])]}}])})],1)],1)},et=[],tt={name:"AdminListView",data(){return{list:[]}},methods:{async getAdminList(){try{let e=await k();console.log("管理员列表",e),this.list=e.data}catch(e){this.$message.error(e.message)}},async deleteAdminHandler(e){console.log(e),this.$confirm("是否删除该用户",null).then((async t=>{console.log("确认",t);try{let t=await C({adminid:e});console.log("删除结果",t);let n=this.list.findIndex((t=>t.adminid==e));this.list.splice(n,1)}catch(n){this.$message.error(n.message)}})).catch((e=>{console.log("取消",e)}))}},mounted(){this.getAdminList()}},nt=tt,rt=(0,c.Z)(nt,Xe,et,!1,null,"19982168",null),at=rt.exports;const ot=[{path:"/",name:"root",component:z,children:[{path:"",redirect:"/page"},{path:"/page",name:"home",label:"首页",icon:"",component:re},{path:"/banner/list",name:"bannerlist",label:"轮播列表",icon:"",parent:{path:"/banner",name:"banner",label:"轮播管理",icon:""},component:fe},{path:"/banner/show",name:"bannershow",label:"轮播展示",icon:"",parent:{path:"/banner",name:"banner",label:"轮播管理",icon:""},component:_e},{path:"/banner/add",name:"banneradd",label:"轮播添加",icon:"",parent:{path:"/banner",name:"banner",label:"轮播管理",icon:""},component:Ae},{path:"/product/list",name:"productlist",label:"商品列表",icon:"el-icon-eleme",parent:{path:"/pro",name:"pro",label:"商品管理",icon:""},component:Te},{path:"/product/show",name:"productshow",label:"商品展示",icon:"",parent:{path:"/pro",name:"pro",label:"商品管理",icon:""},component:Ve},{path:"/admin/list",name:"adminList",label:"管理员列表",icon:"",parent:{path:"/admin",name:"admin",label:"人员管理",icon:""},component:at},{path:"/admin/add",name:"adminAdd",label:"管理员新增",icon:"",parent:{path:"/admin",name:"admin",label:"人员管理",icon:""},component:Qe}]},{path:"/login",name:"login",component:()=>n.e(443).then(n.bind(n,8903))},{path:"/404",name:"notfound",component:G},{path:"*",redirect:e=>({name:"notfound",query:{wd:e.params.pathMatch}})}],lt=e=>{let t=e[0].children;console.log(t);let n={};return t.forEach((e=>{if(""==e.path)return!1;e.parent?n[e.parent.name]?n[e.parent.name].children.push({path:e.path,name:e.name,label:e.label,icon:e.icon}):n[e.parent.name]={path:e.parent.path,name:e.parent.name,label:e.parent.label,icon:e.parent.icon,children:[{path:e.path,name:e.name,label:e.label,icon:e.icon}]}:n[e.name]={path:e.path,name:e.name,label:e.label,icon:e.icon}})),console.log(Object.values(n)),Object.values(n)},st=lt(ot);var it=ot;r["default"].use(m.ZP);const ct=new m.ZP({mode:"hash",base:"/houtai/",routes:it});let ut=["/","/login","/404"];ct.beforeEach(((e,t,n)=>{console.log("to",e),console.log("from",t),console.log("全局路由守卫1111111"),null==t.name&&"/"==t.path&&(console.log("你刷新了"),$.dispatch("getAuthorityInfo"));let{isLogin:r}=$.getters;ut.includes(e.path)||r?n():n({path:"/login",query:{ReturnUrl:ct.currentRoute.fullPath}})})),ct.beforeEach(((e,t,n)=>{console.log("全局路由守卫2222222");let{role:r,checkedkeys:a}=$.state;console.log("role",r),console.log("checkedkeys",a),ut.includes(e.path)||1==r||(2==r||3==r)&&a.includes(e.path)?n():n("/404")}));var dt=ct;r["default"].use(v()),r["default"].config.productionTip=!1,new r["default"]({router:dt,store:$,render:e=>e(d)}).$mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,r,a,o){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],o=e[u][2];for(var s=!0,i=0;i<r.length;i++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(s=!1,o<l&&(l=o));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.d74f4ed7.js"}}(),function(){n.miniCssF=function(e){return"css/about.cc68a264.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-project:";n.l=function(r,a,o,l){if(e[r])e[r].push(a);else{var s,i;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var m=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/houtai/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,r,a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var l=function(n){if(o.onerror=o.onload=null,"load"===n.type)r();else{var l=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=l,i.request=s,o.parentNode&&o.parentNode.removeChild(o),a(i)}};return o.onerror=o.onload=l,o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){a=l[r],o=a.getAttribute("data-href");if(o===e||o===t)return a}},r=function(r){return new Promise((function(a,o){var l=n.miniCssF(r),s=n.p+l;if(t(l,s))return a();e(r,s,null,a,o)}))},a={143:0};n.f.miniCss=function(e,t){var n={443:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=r(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=o);var l=n.p+n.u(t),s=new Error,i=function(r){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,a[1](s)}};n.l(l,i,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,l=r[0],s=r[1],i=r[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(i)var u=i(n)}for(t&&t(r);c<l.length;c++)o=l[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1241)}));r=n.O(r)})();
//# sourceMappingURL=app.d67a966e.js.map